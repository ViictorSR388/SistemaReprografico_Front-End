{"ast":null,"code":"var _jsxFileName = \"/home/lucca/Documents/github/repro/front-end/reprografia_front-end/src/pages/newUser/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport { AuthContext } from './../../helpers/AuthContext';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport '../../styles/newUser.scss';\nimport NewUserContainer from '../../components/newUserContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction NewUser() {\n  _s();\n\n  const {\n    setAuthState\n  } = useContext(AuthContext);\n  var history = useHistory();\n  useEffect(() => {\n    axios.get(\"http://localhost:3002/auth\", {\n      headers: {\n        accessToken: localStorage.getItem(\"accessToken\")\n      }\n    }).then(response => {\n      if (response.status === 500 || response.data.error) {\n        setAuthState({\n          status: false\n        });\n        history.push('./');\n      } else {\n        setAuthState({\n          nif: response.data.nif,\n          email: response.data.email,\n          nome: response.data.nome,\n          imagem: \"http://localhost:3002/\" + response.data.imagem,\n          roles: response.data.roles,\n          status: true\n        });\n        var resposta = response.data.roles.includes(\"3_ROLE_ADMIN\");\n\n        if (resposta === false) {\n          setAuthState({\n            status: false\n          });\n          history.push('./notAuthorized');\n        }\n      }\n    });\n  }, []); //nome\n\n  const [nameUser, setNameUser] = useState(''); //email\n\n  const [emailUser, setEmailUser] = useState(''); //senha\n\n  const [senhaUser, setSenhaUser] = useState(''); //nif\n\n  const [nifUser, setNifUser] = useState(''); //cfp\n\n  const [cfpUser, setCfpUser] = useState(''); //telefone\n\n  const [telefoneUser, setTelefoneUser] = useState(''); //departamento\n\n  const [deptoUser, setDeptoUser] = useState('');\n  var departamento;\n\n  if (deptoUser === \"1\") {\n    departamento = 1;\n  } else if (deptoUser === \"2\") {\n    departamento = 2;\n  } else if (deptoUser === \"3\") {\n    departamento = 3;\n  } else if (deptoUser === \"4\") {\n    departamento = 4;\n  } else if (deptoUser === \"5\") {\n    departamento = 5;\n  } else if (deptoUser === \"6\") {\n    departamento = 6;\n  } else if (deptoUser === \"7\") {\n    departamento = 7;\n  } //imagem\n\n\n  const [image, setImage] = useState();\n\n  const handleChange = e => {\n    if (e.target.files.length) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const formData = new FormData();\n    formData.append(\"image\", image);\n    formData.append(\"nome\", nameUser);\n    formData.append(\"email\", emailUser);\n    formData.append(\"senha\", senhaUser);\n    formData.append(\"nif\", nifUser);\n    formData.append(\"cfp\", cfpUser);\n    formData.append(\"telefone\", telefoneUser);\n    formData.append(\"depto\", departamento);\n    axios.post('http://localhost:3002/registrar', formData, {\n      headers: {\n        accessToken: localStorage.getItem(\"accessToken\")\n      }\n    }).then(result => {\n      console.log(result);\n    });\n  }; // const CreateUserPost = () => {\n  //   const data = {\n  //     nome: nameUser,\n  //     email: emailUser,\n  //     senha: senhaUser,\n  //     nif: nifUser,\n  //     cfp: cfpUser,\n  //     telefone: telefoneUser,\n  //     depto:  departamento,\n  //   }\n  //   axios.post('http://localhost:3002/registrar', data, {\n  //     headers: {\n  //       accessToken: localStorage.getItem(\"accessToken\"),        \n  //     }\n  //   }).then((result) => {\n  //     console.log(result);\n  //   })\n  // }\n\n\n  const onSubmit = e => {\n    e.preventDefault();\n    handleUpload(); // CreateUserPost();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content\",\n    children: [/*#__PURE__*/_jsxDEV(NewUserContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        id: \"h2\",\n        className: \"nu-subTitle\",\n        children: \"Criar novo usu\\xE1rio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"nameUser\",\n          type: \"text\",\n          placeholder: \"Nome\",\n          required: true,\n          onChange: e => {\n            setNameUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"emailUser\",\n          type: \"email\",\n          placeholder: \"E-mail\",\n          required: true,\n          onChange: e => {\n            setEmailUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"senhaUser\",\n          type: \"password\",\n          placeholder: \"Senha\",\n          required: true,\n          onChange: e => {\n            setSenhaUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"nifUser\",\n          type: \"text\",\n          placeholder: \"NIF\",\n          required: true,\n          onChange: e => {\n            setNifUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"cfpUser\",\n          type: \"text\",\n          placeholder: \"CFP\",\n          required: true,\n          onChange: e => {\n            setCfpUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-box\",\n          name: \"telefoneUser\",\n          type: \"text\",\n          placeholder: \"Telefone\",\n          required: true,\n          onChange: e => {\n            setTelefoneUser(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"customize\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"image\",\n            onChange: handleChange,\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), \"Upload\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"departamento\",\n          children: \"DEPARTAMENTO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"select\",\n          id: \"deptoUser\",\n          name: \"deptoUser\",\n          required: true,\n          onChange: e => {\n            setDeptoUser(e.target.value);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"0\",\n            name: \"nothing\",\n            id: \"nothing\",\n            children: \"Nenhuma Selecionada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            name: \"AIP\",\n            id: \"AIP\",\n            children: \"Aprendizagem Industrial Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            name: \"GTP\",\n            id: \"GTP\",\n            children: \"Gradua\\xE7\\xE3o Tecnol\\xF3gica Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            name: \"PGP\",\n            id: \"PGP\",\n            children: \"P\\xF3s-Gradua\\xE7\\xE3o Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            name: \"EP\",\n            id: \"EP\",\n            children: \"Extens\\xE3o Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5\",\n            name: \"IPP\",\n            id: \"IPP\",\n            children: \"Inicia\\xE7\\xE3o Profissional Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"6\",\n            name: \"QPP\",\n            id: \"QPP\",\n            children: \"Qualifica\\xE7\\xE3o Profissional Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"7\",\n            name: \"AEPP\",\n            id: \"AEPP\",\n            children: \"Aperfei\\xE7./Especializ. Profis. Presencial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btns\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            className: \"nu-button\",\n            id: \"btn\",\n            value: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"nu-button\",\n            id: \"btn\",\n            value: \"Voltar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewUser, \"x/9nRaDa0MlNPN3MSKUvgmemAsY=\", false, function () {\n  return [useHistory];\n});\n\n_c = NewUser;\n;\nexport default NewUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewUser\");","map":{"version":3,"sources":["/home/lucca/Documents/github/repro/front-end/reprografia_front-end/src/pages/newUser/index.js"],"names":["React","useEffect","useContext","useState","AuthContext","useHistory","axios","NewUserContainer","NewUser","setAuthState","history","get","headers","accessToken","localStorage","getItem","then","response","status","data","error","push","nif","email","nome","imagem","roles","resposta","includes","nameUser","setNameUser","emailUser","setEmailUser","senhaUser","setSenhaUser","nifUser","setNifUser","cfpUser","setCfpUser","telefoneUser","setTelefoneUser","deptoUser","setDeptoUser","departamento","image","setImage","handleChange","e","target","files","length","handleUpload","formData","FormData","append","post","result","console","log","onSubmit","preventDefault","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\nimport { AuthContext } from './../../helpers/AuthContext';\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios';\nimport '../../styles/newUser.scss';\n\nimport NewUserContainer from '../../components/newUserContainer';\n\nfunction NewUser() {\n  const { setAuthState } = useContext(AuthContext);\n  var history = useHistory();\n\n  useEffect(() => {\n    axios\n      .get(\"http://localhost:3002/auth\", {\n        headers: {\n          accessToken: localStorage.getItem(\"accessToken\"),\n        },\n      })\n      .then((response) => {\n        if (response.status === 500 || response.data.error) {\n          setAuthState({ status: false });\n          history.push('./')\n        }\n        else {\n          setAuthState({\n            nif: response.data.nif,\n            email: response.data.email,\n            nome: response.data.nome,\n            imagem: \"http://localhost:3002/\" + response.data.imagem,\n            roles: response.data.roles,\n            status: true\n          });\n          var resposta = response.data.roles.includes(\"3_ROLE_ADMIN\");\n          if (resposta === false) {\n            setAuthState({ status: false });\n            history.push('./notAuthorized')\n          }\n        }\n      })\n  }, []);\n\n  //nome\n  const [nameUser, setNameUser] = useState('');\n  //email\n  const [emailUser, setEmailUser] = useState('');\n  //senha\n  const [senhaUser, setSenhaUser] = useState('');\n  //nif\n  const [nifUser, setNifUser] = useState('');\n  //cfp\n  const [cfpUser, setCfpUser] = useState('');\n  //telefone\n  const [telefoneUser, setTelefoneUser] = useState('');\n  //departamento\n  const [deptoUser, setDeptoUser] = useState('');\n\n  var departamento;\n\n  if (deptoUser === \"1\") {\n    departamento = 1;\n  } else if (deptoUser === \"2\") {\n    departamento = 2;\n  } else if (deptoUser === \"3\") {\n    departamento = 3;\n  } else if (deptoUser === \"4\") {\n    departamento = 4;\n  } else if (deptoUser === \"5\") {\n    departamento = 5;\n  } else if (deptoUser === \"6\") {\n    departamento = 6;\n  } else if (deptoUser === \"7\") {\n    departamento = 7;\n  }\n\n  //imagem\n  const [image, setImage] = useState();\n\n  const handleChange = e => {\n    if (e.target.files.length) {\n      setImage(\n        e.target.files[0]\n      );\n    }\n  }\n\n  const handleUpload = () => {\n    const formData = new FormData();\n    formData.append(\"image\", image);\n    formData.append(\"nome\", nameUser);\n    formData.append(\"email\", emailUser);\n    formData.append(\"senha\", senhaUser);\n    formData.append(\"nif\", nifUser);\n    formData.append(\"cfp\", cfpUser);\n    formData.append(\"telefone\", telefoneUser);\n    formData.append(\"depto\", departamento);\n\n    axios.post('http://localhost:3002/registrar', formData, {\n      headers: {\n        accessToken: localStorage.getItem(\"accessToken\")\n      }\n    }).then((result) => {\n      console.log(result)\n    })\n  };\n\n  // const CreateUserPost = () => {\n  //   const data = {\n  //     nome: nameUser,\n\n  //     email: emailUser,\n\n  //     senha: senhaUser,\n\n  //     nif: nifUser,\n\n  //     cfp: cfpUser,\n\n  //     telefone: telefoneUser,\n\n  //     depto:  departamento,\n  //   }\n  //   axios.post('http://localhost:3002/registrar', data, {\n  //     headers: {\n  //       accessToken: localStorage.getItem(\"accessToken\"),        \n  //     }\n  //   }).then((result) => {\n  //     console.log(result);\n  //   })\n  // }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    handleUpload();\n    // CreateUserPost();\n  }\n\n  return (\n    <div className=\"content\">\n      <NewUserContainer />\n      <div className=\"container\">\n        <h2 id=\"h2\" className=\"nu-subTitle\">\n          Criar novo usuário\n        </h2>\n        <form onSubmit={onSubmit}>\n          <input\n            className=\"input-box\"\n            name=\"nameUser\"\n            type=\"text\"\n            placeholder=\"Nome\"\n            required\n            onChange={(e) => {\n              setNameUser(e.target.value);\n            }}\n          />\n          <input\n            className=\"input-box\"\n            name=\"emailUser\"\n            type=\"email\"\n            placeholder=\"E-mail\"\n            required\n            onChange={(e) => {\n              setEmailUser(e.target.value);\n            }}\n          />\n          <input\n            className=\"input-box\"\n            name=\"senhaUser\"\n            type=\"password\"\n            placeholder=\"Senha\"\n            required\n            onChange={(e) => {\n              setSenhaUser(e.target.value);\n            }}\n          />\n          <input\n            className=\"input-box\"\n            name=\"nifUser\"\n            type=\"text\"\n            placeholder=\"NIF\"\n            required\n            onChange={(e) => {\n              setNifUser(e.target.value);\n            }}\n          />\n          <input\n            className=\"input-box\"\n            name=\"cfpUser\"\n            type=\"text\"\n            placeholder=\"CFP\"\n            required\n            onChange={(e) => {\n              setCfpUser(e.target.value);\n            }}\n          />\n          <input\n            className=\"input-box\"\n            name=\"telefoneUser\"\n            type=\"text\"\n            placeholder=\"Telefone\"\n            required\n            onChange={(e) => {\n              setTelefoneUser(e.target.value);\n            }}\n          />\n          <label className=\"customize\">\n            <input\n              type=\"file\"\n              name=\"image\"\n              onChange={handleChange}\n              accept=\"image/*\"\n            />\n            Upload\n          </label>\n          <h3 className=\"departamento\">DEPARTAMENTO</h3>\n          <select\n            className=\"select\"\n            id=\"deptoUser\"\n            name=\"deptoUser\"\n            required\n            onChange={(e) => {\n              setDeptoUser(e.target.value);\n            }}\n          >\n            <option value=\"0\" name=\"nothing\" id=\"nothing\">\n              Nenhuma Selecionada\n            </option>\n            <option value=\"1\" name=\"AIP\" id=\"AIP\">\n              Aprendizagem Industrial Presencial\n            </option>\n            <option value=\"2\" name=\"GTP\" id=\"GTP\">\n              Graduação Tecnológica Presencial\n            </option>\n            <option value=\"3\" name=\"PGP\" id=\"PGP\">\n              Pós-Graduação Presencial\n            </option>\n            <option value=\"4\" name=\"EP\" id=\"EP\">\n              Extensão Presencial\n            </option>\n            <option value=\"5\" name=\"IPP\" id=\"IPP\">\n              Iniciação Profissional Presencial\n            </option>\n            <option value=\"6\" name=\"QPP\" id=\"QPP\">\n              Qualificação Profissional Presencial\n            </option>\n            <option value=\"7\" name=\"AEPP\" id=\"AEPP\">\n              Aperfeiç./Especializ. Profis. Presencial\n            </option>\n          </select>\n          <div className=\"btns\">\n            <input\n              type=\"submit\"\n              className=\"nu-button\"\n              id=\"btn\"\n              value=\"Enviar\"\n            />\n            <input\n              className=\"nu-button\"\n              id=\"btn\"\n              value=\"Voltar\"\n            />\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default NewUser;"]},"metadata":{},"sourceType":"module"}